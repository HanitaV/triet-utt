<!DOCTYPE html>
<html lang="vi" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√†i ƒë·∫∑t | NEO Education</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/common.css?v=2025122902">
    <link rel="stylesheet" href="css/m3-design-system.css?v=2025122902">
    <link rel="stylesheet" href="css/dashboard.css?v=2025122902">
</head>

<body>
    <!-- Header Navigation -->
    <header class="main-header">
        <div class="header-content">
            <a href="index.html" class="logo header-logo-centered" id="header-logo">
                <img src="assets/logo/dark_logo.png" alt="NEO" class="logo-img logo-for-dark" height="32">
                <img src="assets/logo/white_logo.png" alt="NEO" class="logo-img logo-for-light" height="32">
                <span class="logo-text">NEO Education</span>
            </a>
        </div>
    </header>

    <main class="main-content">
        <div class="md-container" style="padding: 24px 16px; max-width: 800px;">
            <h2 class="md-section-title">C√†i ƒë·∫∑t & D·ªØ li·ªáu</h2>

            <!-- Subject Selector Section -->
            <div class="md-card md-card-outlined">
                <div class="md-card-body">
                    <div class="md-data-header">
                        <span class="md-data-icon">üìö</span>
                        <div class="md-data-text">
                            <h3>Ch·ªçn m√¥n h·ªçc</h3>
                            <p>Ch·ªçn m√¥n h·ªçc b·∫°n mu·ªën √¥n t·∫≠p</p>
                        </div>
                    </div>
                    <div id="subject-list" class="subject-selector-list"
                        style="margin-top: 16px; display: flex; flex-direction: column; gap: 8px;">
                        <!-- Subject options will be rendered here by JS -->
                        <div style="color: var(--md-on-surface-variant); font-size: 14px;">ƒêang t·∫£i danh s√°ch m√¥n h·ªçc...
                        </div>
                    </div>
                </div>
            </div>

            <!-- Theme Toggle Section -->
            <div class="md-card md-card-outlined">
                <div class="md-card-body">
                    <div class="md-data-header" style="margin-bottom: 16px;">
                        <span class="md-data-icon">üé®</span>
                        <div class="md-data-text">
                            <h3>Giao di·ªán</h3>
                            <p>Ch·ªçn ch·∫ø ƒë·ªô giao di·ªán ph√π h·ª£p v·ªõi b·∫°n</p>
                        </div>
                    </div>
                    <div id="theme-options" style="display: flex; gap: 12px; flex-wrap: wrap;">
                        <div class="theme-option" data-theme="dark" onclick="selectTheme('dark')" style="
                            flex: 1;
                            min-width: 120px;
                            padding: 16px;
                            border-radius: 12px;
                            cursor: pointer;
                            text-align: center;
                            transition: all 0.2s ease;
                            background: var(--md-surface-container);
                            border: 2px solid transparent;
                        ">
                            <div style="font-size: 32px; margin-bottom: 8px;">üåô</div>
                            <div style="font-weight: 600; font-size: 14px;">T·ªëi</div>
                        </div>
                        <div class="theme-option" data-theme="light" onclick="selectTheme('light')" style="
                            flex: 1;
                            min-width: 120px;
                            padding: 16px;
                            border-radius: 12px;
                            cursor: pointer;
                            text-align: center;
                            transition: all 0.2s ease;
                            background: var(--md-surface-container);
                            border: 2px solid transparent;
                        ">
                            <div style="font-size: 32px; margin-bottom: 8px;">‚òÄÔ∏è</div>
                            <div style="font-weight: 600; font-size: 14px;">S√°ng</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Experimental Features Section -->
            <div class="md-card md-card-outlined">
                <div class="md-card-body">
                    <div class="md-data-header" style="margin-bottom: 16px;">
                        <span class="md-data-icon">üß™</span>
                        <div class="md-data-text">
                            <h3>M√†u ch·ªß ƒë·∫°o (Th·ª≠ nghi·ªám)</h3>
                            <p>T√πy ch·ªânh m√†u s·∫Øc theo s·ªü th√≠ch (Material You)</p>
                        </div>
                    </div>

                    <div id="color-theme-options"
                        style="display: flex; gap: 16px; flex-wrap: wrap; justify-content: center;">
                        <!-- Default (NEO) -->
                        <div class="color-option" onclick="selectColorTheme('default')" title="M·∫∑c ƒë·ªãnh (NEO)"
                            style="cursor: pointer; text-align: center;">
                            <div
                                style="width: 48px; height: 48px; border-radius: 50%; background: #7c3aed; margin-bottom: 8px; border: 2px solid transparent; position: relative;">
                                <div
                                    style="position: absolute; width: 50%; height: 100%; right: 0; top: 0; background: #06b6d4; border-top-right-radius: 48px; border-bottom-right-radius: 48px;">
                                </div>
                            </div>
                            <span style="font-size: 12px; font-weight: 500;">M·∫∑c ƒë·ªãnh</span>
                        </div>

                        <!-- Ocean -->
                        <div class="color-option" onclick="selectColorTheme('ocean')" title="ƒê·∫°i d∆∞∆°ng"
                            style="cursor: pointer; text-align: center;">
                            <div
                                style="width: 48px; height: 48px; border-radius: 50%; background: #0ea5e9; margin-bottom: 8px; border: 2px solid transparent;">
                            </div>
                            <span style="font-size: 12px; font-weight: 500;">ƒê·∫°i d∆∞∆°ng</span>
                        </div>

                        <!-- Nature -->
                        <div class="color-option" onclick="selectColorTheme('nature')" title="Thi√™n nhi√™n"
                            style="cursor: pointer; text-align: center;">
                            <div
                                style="width: 48px; height: 48px; border-radius: 50%; background: #10b981; margin-bottom: 8px; border: 2px solid transparent;">
                            </div>
                            <span style="font-size: 12px; font-weight: 500;">Thi√™n nhi√™n</span>
                        </div>

                        <!-- Sunset -->
                        <div class="color-option" onclick="selectColorTheme('sunset')" title="Ho√†ng h√¥n"
                            style="cursor: pointer; text-align: center;">
                            <div
                                style="width: 48px; height: 48px; border-radius: 50%; background: #f59e0b; margin-bottom: 8px; border: 2px solid transparent;">
                            </div>
                            <span style="font-size: 12px; font-weight: 500;">Ho√†ng h√¥n</span>
                        </div>

                        <!-- Berry -->
                        <div class="color-option" onclick="selectColorTheme('berry')" title="D√¢u t√¢y"
                            style="cursor: pointer; text-align: center;">
                            <div
                                style="width: 48px; height: 48px; border-radius: 50%; background: #ec4899; margin-bottom: 8px; border: 2px solid transparent;">
                            </div>
                            <span style="font-size: 12px; font-weight: 500;">D√¢u t√¢y</span>
                        </div>
                    </div>

                    <!-- Row 2 -->
                    <div
                        style="display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; width: 100%; margin-top: 8px;">
                        <!-- Royal -->
                        <div class="color-option" onclick="selectColorTheme('royal')" title="Ho√†ng gia"
                            style="cursor: pointer; text-align: center;">
                            <div
                                style="width: 48px; height: 48px; border-radius: 50%; background: #4338ca; margin-bottom: 8px; border: 2px solid transparent;">
                            </div>
                            <span style="font-size: 12px; font-weight: 500;">Ho√†ng gia</span>
                        </div>

                        <!-- Midnight -->
                        <div class="color-option" onclick="selectColorTheme('midnight')" title="ƒê√™m t·ªëi"
                            style="cursor: pointer; text-align: center;">
                            <div
                                style="width: 48px; height: 48px; border-radius: 50%; background: #0f172a; margin-bottom: 8px; border: 2px solid transparent; border: 1px solid var(--md-outline);">
                            </div>
                            <span style="font-size: 12px; font-weight: 500;">ƒê√™m t·ªëi</span>
                        </div>

                        <!-- Coffee -->
                        <div class="color-option" onclick="selectColorTheme('coffee')" title="C√† ph√™"
                            style="cursor: pointer; text-align: center;">
                            <div
                                style="width: 48px; height: 48px; border-radius: 50%; background: #78350f; margin-bottom: 8px; border: 2px solid transparent;">
                            </div>
                            <span style="font-size: 12px; font-weight: 500;">C√† ph√™</span>
                        </div>

                        <!-- Crimson -->
                        <div class="color-option" onclick="selectColorTheme('crimson')" title="Huy·∫øt d·ª•"
                            style="cursor: pointer; text-align: center;">
                            <div
                                style="width: 48px; height: 48px; border-radius: 50%; background: #9f1239; margin-bottom: 8px; border: 2px solid transparent;">
                            </div>
                            <span style="font-size: 12px; font-weight: 500;">Huy·∫øt d·ª•</span>
                        </div>

                        <!-- Teal -->
                        <div class="color-option" onclick="selectColorTheme('teal')" title="Ng·ªçc b√≠ch"
                            style="cursor: pointer; text-align: center;">
                            <div
                                style="width: 48px; height: 48px; border-radius: 50%; background: #0d9488; margin-bottom: 8px; border: 2px solid transparent;">
                            </div>
                            <span style="font-size: 12px; font-weight: 500;">Ng·ªçc b√≠ch</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="md-card md-card-outlined">
                <div class="md-card-body">
                    <div class="md-data-header">
                        <span class="md-data-icon">üíæ</span>
                        <div class="md-data-text">
                            <h3>Qu·∫£n l√Ω d·ªØ li·ªáu</h3>
                            <p>D·ªØ li·ªáu h·ªçc t·∫≠p ƒë∆∞·ª£c l∆∞u tr√™n tr√¨nh duy·ªát c·ªßa b·∫°n. H√£y sao l∆∞u th∆∞·ªùng xuy√™n ƒë·ªÉ tr√°nh m·∫•t
                                d·ªØ li·ªáu.</p>
                        </div>
                    </div>
                    <div class="md-data-actions" style="display: flex; gap: 12px; flex-wrap: wrap;">
                        <button onclick="exportData()" class="md-btn md-btn-filled">
                            ‚¨áÔ∏è Sao l∆∞u d·ªØ li·ªáu
                        </button>
                        <button onclick="document.getElementById('import-file').click()" class="md-btn md-btn-outlined">
                            ‚¨ÜÔ∏è Kh√¥i ph·ª•c d·ªØ li·ªáu
                        </button>
                        <input type="file" id="import-file" style="display: none" onchange="importData(this)">
                    </div>
                    <div style="margin-top: 16px; font-size: 13px; color: var(--md-error);">
                        * L∆∞u √Ω: X√≥a cache tr√¨nh duy·ªát s·∫Ω l√†m m·∫•t d·ªØ li·ªáu n·∫øu ch∆∞a sao l∆∞u.
                    </div>
                </div>
            </div>

            <!-- Support Section -->
            <div class="md-card md-card-outlined">
                <div class="md-card-body"
                    style="display: flex; align-items: center; justify-content: space-between; gap: 16px; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 200px;">
                        <h3 class="md-card-title"
                            style="color: var(--md-primary); display: flex; align-items: center; gap: 8px;">
                            ‚òï ·ª¶ng h·ªô ph√°t tri·ªÉn
                        </h3>
                        <p class="md-card-text" style="font-size: 14px; margin-top: 4px;">D·ª± √°n phi l·ª£i nhu·∫≠n. M·ªçi s·ª±
                            ·ªßng h·ªô gi√∫p duy tr√¨ server v√† ph√°t tri·ªÉn t√≠nh nƒÉng m·ªõi.</p>
                    </div>
                    <button onclick="openSupportModal()" class="md-btn md-btn-filled"
                        style="background: var(--md-primary); color: var(--md-on-primary);">
                        M·ªùi ly c√† ph√™ ‚òï
                    </button>
                </div>
            </div>

            <!-- App Info / Footer Content Moved Here -->
            <div class="md-card md-card-filled">
                <div class="md-card-body">
                    <h3 class="md-card-title" style="font-size: 18px; margin-bottom: 16px;">Th√¥ng tin ·ª©ng d·ª•ng</h3>

                    <div
                        style="color: var(--md-on-surface-variant); font-size: 14px; line-height: 1.6; display: flex; flex-direction: column; gap: 12px;">
                        <p><strong>√în Thi Tr·∫Øc Nghi·ªám</strong> l√† d·ª± √°n m√£ ngu·ªìn m·ªü h·ªó tr·ª£ sinh vi√™n √¥n t·∫≠p hi·ªáu qu·∫£.
                        </p>

                        <p id="footer-school-info">
                            √în t·∫≠p mi·ªÖn ph√≠ do sinh vi√™n tr∆∞·ªùng <strong>ƒê·∫°i h·ªçc C√¥ng ngh·ªá Giao th√¥ng v·∫≠n t·∫£i</strong>
                            t·∫°o v√†
                            <strong>H·ªçc vi·ªán C√¥ng ngh·ªá B∆∞u ch√≠nh Vi·ªÖn th√¥ng</strong> h·ªó tr·ª£ n·ªôi dung ‚ù§Ô∏è
                        </p>

                        <div class="footer-disclaimer"
                            style="font-style: italic; opacity: 0.8; padding: 12px; background: var(--md-surface-container-high); border-radius: 8px;">
                            Disclaimer: Gemini c√≥ th·ªÉ m·∫Øc sai l·∫ßm, c√°c c√¢u h·ªèi, ƒë√°p √°n v√† n·ªôi dung l√Ω thuy·∫øt n√™n d·ª´ng
                            l·∫°i ·ªü m·ª©c ƒë·ªô tham kh·∫£o.
                        </div>

                        <div style="border-top: 1px solid var(--md-outline-variant); margin: 8px 0;"></div>

                        <a href="https://www.facebook.com/HanitaVII" target="_blank" class="text-secondary"
                            style="text-decoration: none; display: inline-flex; align-items: center; gap: 8px; color: var(--md-primary);">
                            <span style="font-size: 20px;">üë®‚Äçüíª</span>
                            <span>Li√™n h·ªá / G√≥p √Ω: <strong>HanitaVII</strong></span>
                        </a>

                        <div class="footer-version" style="font-size: 12px; opacity: 0.6; font-family: monospace;">
                            <span>v2.0.0</span> ‚Ä¢
                            <span>Updated: 29/12/2025</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- No global footer here as it's moved to main content -->

    <!-- Support Modal -->
    <div class="modal" id="support-modal">
        <div class="modal-overlay" onclick="closeSupportModal()"></div>
        <div class="modal-content" style="max-width: 360px; text-align: center; padding: 24px;">
            <div style="font-size: 48px; margin-bottom: 16px;">‚òï</div>
            <h3 style="margin-bottom: 12px; font-size: 20px;">C·∫£m ∆°n b·∫°n ƒë√£ ·ªßng h·ªô!</h3>
            <p style="color: var(--md-on-surface-variant); font-size: 14px; margin-bottom: 20px;">
                Qu√©t m√£ QR ƒë·ªÉ ·ªßng h·ªô qua Momo / Ng√¢n h√†ng
            </p>

            <div
                style="background: white; padding: 12px; border-radius: 16px; display: inline-block; box-shadow: var(--md-shadow-1); margin-bottom: 20px;">
                <img src="assets/photos/qr.png" alt="QR Code"
                    style="width: 100%; max-width: 250px; display: block; border-radius: 8px;">
            </div>

            <div style="margin-bottom: 24px;">
                <p style="font-size: 13px; font-weight: 500;">HanitaVII</p>
            </div>

            <button onclick="closeSupportModal()" class="md-btn md-btn-tonal" style="width: 100%;">
                ƒê√≥ng
            </button>
        </div>
    </div>

    <!-- Floating Navigation Dock (Moved from Header) -->
    <nav class="main-nav">
        <a href="index.html" class="nav-tab">
            <span class="tab-icon">üè†</span>
            <span class="tab-text">Trang ch·ªß</span>
        </a>
        <a href="study.html" class="nav-tab">
            <span class="tab-icon">üìñ</span>
            <span class="tab-text">H·ªçc t·∫≠p</span>
        </a>
        <a href="exam.html" class="nav-tab">
            <span class="tab-icon">üìù</span>
            <span class="tab-text">Thi th·ª≠</span>
        </a>
        <a href="simulation.html" class="nav-tab">
            <span class="tab-icon">üéØ</span>
            <span class="tab-text">Gi·∫£ l·∫≠p</span>
        </a>
        <a href="settings.html" class="nav-tab active">
            <span class="tab-icon">‚öôÔ∏è</span>
            <span class="tab-text">C√†i ƒë·∫∑t</span>
        </a>
    </nav>

    <script src="js/common.js?v=2025122902"></script>
    <script src="js/dashboard.js?v=2025122902"></script>
    <!-- Reusing dashboard.js for export/import logic if functions are global or accessible -->
    <script>
        // Ensure active tab is highlighted if common.js overrides it
        document.addEventListener('DOMContentLoaded', async () => {
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(t => t.classList.remove('active'));
            const settingsTab = document.querySelector('a[href="settings.html"]');
            if (settingsTab) settingsTab.classList.add('active');

            // Render subject selector
            await renderSubjectSelector();
        });

        // Render Subject Selector in Settings
        async function renderSubjectSelector() {
            // Wait for subjects to be loaded
            await loadSubjectsList();

            const container = document.getElementById('subject-list');
            if (!container || subjectsData.length === 0) {
                if (container) container.innerHTML = '<div style="color: var(--md-on-surface-variant);">Kh√¥ng t√¨m th·∫•y m√¥n h·ªçc n√†o.</div>';
                return;
            }

            const currentSubjectId = getCurrentSubjectId();

            container.innerHTML = subjectsData.map(subject => `
                <div class="subject-option-card ${subject.id === currentSubjectId ? 'active' : ''}" 
                     onclick="selectSubject('${subject.id}')"
                     style="
                        display: flex;
                        align-items: center;
                        gap: 16px;
                        padding: 16px;
                        border-radius: 12px;
                        cursor: pointer;
                        transition: all 0.2s ease;
                        background: ${subject.id === currentSubjectId ? 'var(--md-primary-container)' : 'var(--md-surface-container)'};
                        border: 2px solid ${subject.id === currentSubjectId ? 'var(--md-primary)' : 'transparent'};
                     ">
                    <span style="font-size: 32px;">${subject.icon}</span>
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 15px; color: ${subject.id === currentSubjectId ? 'var(--md-on-primary-container)' : 'var(--md-on-surface)'};">
                            ${subject.name}
                        </div>
                        <div style="font-size: 13px; color: var(--md-on-surface-variant); margin-top: 2px;">
                            ${subject.school}
                        </div>
                    </div>
                    ${subject.id === currentSubjectId ? '<span style="color: var(--md-primary); font-size: 20px;">‚úì</span>' : ''}
                </div>
            `).join('');
        }

        function selectSubject(subjectId) {
            const currentSubjectId = getCurrentSubjectId();
            if (subjectId !== currentSubjectId) {
                setCurrentSubject(subjectId); // This will reload the page
            }
        }

        // Theme Selection
        function selectTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('quiz-theme', theme);
            updateThemeUI();
        }

        function updateThemeUI() {
            const currentTheme = localStorage.getItem('quiz-theme') || 'dark';
            document.querySelectorAll('.theme-option').forEach(option => {
                const optionTheme = option.dataset.theme;
                if (optionTheme === currentTheme) {
                    option.style.borderColor = 'var(--md-primary)';
                    option.style.background = 'var(--md-primary-container)';
                } else {
                    option.style.borderColor = 'transparent';
                    option.style.background = 'var(--md-surface-container)';
                }
            });
        }

        // Initialize theme UI on load
        document.addEventListener('DOMContentLoaded', () => {
            updateThemeUI();
        });

        // Support Modal Logic
        function openSupportModal() {
            const modal = document.getElementById('support-modal');
            if (modal) {
                modal.classList.add('active');
                modal.style.display = 'flex'; // Ensure flex display if hidden
                // Animate check? Rely on CSS .modal.active
            }
        }

        function closeSupportModal() {
            const modal = document.getElementById('support-modal');
            if (modal) {
                modal.classList.remove('active');
                setTimeout(() => {
                    if (!modal.classList.contains('active')) modal.style.display = 'none';
                }, 300); // Wait for transition
            }
        }
    </script>
</body>

</html>